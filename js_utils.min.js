(function(){var t,e,r,i,o,s,u,l,a,h,c,p,f=[].slice,d=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1},y=function(t,n){function e(){this.constructor=t}for(var r in n)g.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},g={}.hasOwnProperty;for(window.JSUtils={},JSUtils.Sequence=function(){function t(t,n,e){null==t&&(t=[]),null==n&&(n=!0),null==e&&(e=!0),this.data=t,this.idx=0,this.stopOnError=e,this._doneCallbacks=[],this._startCallback=null,this._endCallback=null,this._isDone=!1,this._isStopped=!1,this._parameterMode=this.constructor.PARAM_MODES.EXPLICIT,n===!0&&this.start()}return t.PARAM_MODES={CONTEXT:"CONTEXT",IMPLICIT:"IMPLICIT",EXPLICIT:"EXPLICIT"},t.prototype.start=function(t){return t instanceof Array&&(this.data=t),"function"==typeof this._startCallback&&this._startCallback(),this._invokeNextFunction(),this},t.prototype._createParamListFromContext=function(t,n){var e,r,i,o,s;if(!(n instanceof Array)){for(o=t.toString().split(/[()]/g).second.split(/\s*,\s*/g),s=[],i=0,r=o.length;r>i;i++)e=o[i],s.push(n[e]);return s}return n.slice(0)},t.prototype._invokeNextFunction=function(){var t,n,e,r,i,o,s,u,l,a,h,c,p,d;if(n=1<=arguments.length?f.call(arguments,0):[],this._isStopped)return this;if(r=this.data[this.idx],null!=r){if(r instanceof Array?(s=r[0],p=r[1],l=r[2]):(s=r.func,p=r.scope,l=r.params),null!=s){t=this.constructor,d=this,l instanceof Array&&l.length>0&&(this._parameterMode=t.PARAM_MODES.EXPLICIT),this._parameterMode===t.PARAM_MODES.CONTEXT?u=this._createParamListFromContext(s,n[0].context):this._parameterMode===t.PARAM_MODES.EXPLICIT?u=l:this._parameterMode===t.PARAM_MODES.IMPLICIT&&(u=n),l instanceof Function&&(e=this.data[this.idx-1],u=l(n,{func:(null!=e?e.func:void 0)||(null!=e?e[0]:void 0),scope:(null!=e?e.scope:void 0)||(null!=e?e[1]:void 0)||null,params:(null!=e&&null!=(a=e.params)?a.slice(0):void 0)||(null!=e&&null!=(h=e[2])?h.slice(0):void 0)||[]},this.idx));try{c=s.apply(p||window,u)}catch(o){i=o,c=null,this.stopOnError&&this.interrupt()}null!=(null!=c?c.done:void 0)&&null!=(null!=c?c.context:void 0)?c.done.done(function(){return d.idx++,d._parameterMode=t.PARAM_MODES.CONTEXT,d._invokeNextFunction(c)}):null!=(null!=c?c.done:void 0)?c.done(function(){return d.idx++,d._parameterMode=t.PARAM_MODES.IMPLICIT,d._invokeNextFunction.apply(d,arguments)}):(null!=c?c.context:void 0)?(this.idx++,this._parameterMode=t.PARAM_MODES.CONTEXT,this._invokeNextFunction(c)):(this.idx++,this._parameterMode=t.PARAM_MODES.IMPLICIT,this._invokeNextFunction(c))}}else this.lastResult=n[0],this._parameterMode===this.constructor.PARAM_MODES.CONTEXT&&(this.lastResult=this.lastResult.context),"function"==typeof this._endCallback&&this._endCallback(),this._execDoneCallbacks();return this},t.prototype._execDoneCallbacks=function(){var t,n,e,r;for(this._isDone=!0,r=this._doneCallbacks,e=0,n=r.length;n>e;e++)(t=r[e])();return this},t.prototype.stop=function(t){return null==t&&(t=!0),this._isStopped=!0,t&&("function"==typeof this._endCallback&&this._endCallback(),this._execDoneCallbacks()),this},t.prototype.interrupt=function(){return this.stop(!1)},t.prototype.resume=function(){return this._isStopped=!1,this._invokeNextFunction(),this},t.prototype.onStart=function(){var t,n,e;return n=arguments[0],e=arguments[1],t=3<=arguments.length?f.call(arguments,2):[],"function"==typeof n&&(this._startCallback=function(){return n.apply(e,t)}),this},t.prototype.onEnd=function(){var t,n,e;return n=arguments[0],e=arguments[1],t=3<=arguments.length?f.call(arguments,2):[],"function"==typeof n&&(this._endCallback=function(){return n.apply(e,t)}),this},t.prototype.done=function(){var t,n,e,r;return n=arguments[0],e=arguments[1],t=3<=arguments.length?f.call(arguments,2):[],"function"==typeof n&&(r=this,this._isDone?n.apply(e,t.concat([r.lastResult])):this._doneCallbacks.push(function(){return n.apply(e,t.concat([r.lastResult]))})),this},t.prototype.then=t.prototype.done,t.prototype.progress=function(){return this.idx/this.data.length},t.prototype["while"]=function(t,n,e,r){return this.onStart(t,e,r),this.onEnd(n,e,r),this},t}(),JSUtils.Barrier=function(){function t(t,n){null==t&&(t=[]),null==n&&(n=!0),this.data=t,this.remainingThreads=t.length,this.funcResults=[],this._doneCallbacks=[],this._startCallback=null,this._endCallback=null,this._endAllCallback=null,this._isDone=!1,this._isStopped=!1,this._sequences=[],n===!0&&this.start()}return t.forArray=function(t,n,e){var r,i,o,s;for(null==t&&(t=[]),null==e&&(e=!0),r=[],s=0,o=t.length;o>s;s++)i=t[s],r.push({func:function(t){return function(){return n(t)}}(i)});return new JSUtils.Barrier(r,e)},t.prototype.start=function(t){var n,e,r,i,o;if(t instanceof Array&&(this.data=t,this.remainingThreads=t.length),"function"==typeof this._startCallback&&this._startCallback(),this.remainingThreads>0)for(o=this.data,e=i=0,r=o.length;r>i;e=++i)n=o[e],null!=n&&this._invokeNextFunction(n,e);else this._funcDone();return this},t.prototype._invokeNextFunction=function(t,n){var e,r,i;return this._isStopped?this:(e=t.func||t[0],i=t.scope||t[1],r=t.params||t[2],this._sequences.push(new JSUtils.Sequence([{func:function(){var t,n;try{return e.apply(i,r)}catch(n){return t=n}}},{func:function(t){return this.funcResults[n]=t,this._funcDone(),this},scope:this}])),this)},t.prototype._funcDone=function(){return--this.remainingThreads<=0&&(this._isDone=!0,"function"==typeof this._endCallback&&this._endCallback(),this._execDoneCallbacks(),"function"==typeof this._endAllCallback&&this._endAllCallback()),this},t.prototype.done=function(){var t,n,e,r;return n=arguments[0],e=arguments[1],t=3<=arguments.length?f.call(arguments,2):[],"function"==typeof n&&(r=this,this._isDone?n.apply(e,t.concat([r.funcResults])):this._doneCallbacks.push(function(){return n.apply(e,t.concat([r.funcResults]))})),this},t.prototype.then=t.prototype.done,t.prototype.getProgress=function(){return 1-this.remainingThreads/this.data.length},t.prototype._execDoneCallbacks=function(){var t,n,e,r;for(r=this._doneCallbacks,e=0,n=r.length;n>e;e++)(t=r[e])();return this},t.prototype["while"]=function(t,n,e){return null!=e?(this._startCallback=function(){return e.startCallback()},this._endCallback=function(){return e.endCallback()}):(this._startCallback=t,this._endCallback=n),this},t.prototype.whileAll=function(t,n,e){return null!=e?(this._startCallback=function(){return e.startCallback()},this._endAllCallback=function(){return e.endCallback()}):(this._startCallback=t,this._endAllCallback=n),this},t.prototype.stop=function(t){var n,e,r,i;for(null==t&&(t=!0),this._isStopped=!0,r=this._sequences,e=0,n=r.length;n>e;e++)i=r[e],i.stop(t);return t&&("function"==typeof this._endCallback&&this._endCallback(),this._execDoneCallbacks()),this},t.prototype.interrupt=function(){return this.stop(!1)},t.prototype.resume=function(){return this._isStopped=!1,this._invokeNextFunction(),this},t}(),JSUtils.Doneable=new JSUtils.Sequence,JSUtils.Hash=function(){function t(t,n,e){var r,i;if(null==n&&(n=null),this.keys=[],this.values=[],this.equality=e,null!=t)for(r in t)i=t[r],this.put(r,i)}var n;return t.fromObject=function(t){var n,e,r;n=new JSUtils.Hash;for(e in t)r=t[e],n.put(e,r);return n},t.prototype.toObject=function(){var t,n,e,r,i,o;for(o={},i=this.keys,t=r=0,e=i.length;e>r;t=++r)n=i[t],o[n]=this.values[t];return o},t.prototype.clone=function(){var t;return t=new JSUtils.Hash,t.keys=this.keys.clone(),t.values=this.values.clone(),t},t.prototype.invert=function(){var t;return t=new JSUtils.Hash,t.keys=this.values.clone(),t.values=this.keys.clone(),t},n=function(t){var n,e;for(n in t)e=t[n],this.put(n,e);return this},t.prototype.findKeyIdx=function(t){var n,e,r,i,o;for(o=this.keys,e=i=0,r=o.length;r>i;e=++i)if(n=o[e],("function"==typeof this.equality?this.equality(n,t):void 0)||n===t)return e;return-1},t.prototype.put=function(t,e){var r;return null==e?n.call(this,t):(r=this.findKeyIdx(t),0>r?(this.keys.push(t),this.values.push(e)):(this.keys[r]=t,this.values[r]=e),this)},t.prototype.putMultiple=function(){var t,e,r,i,o,s,u;for(o=1<=arguments.length?f.call(arguments,0):[],i=0,r=o.length;r>i;i++)s=o[i],e=s[0],u=s[1],null==u&&n.call(this,e),t=this.findKeyIdx(e),0>t?(this.keys.push(e),this.values.push(u)):(t=this.keys.indexOf(e),0>t?(this.keys.push(e),this.values.push(u)):(this.keys[t]=e,this.values[t]=u));return this},t.prototype.get=function(t,n){var e,r,i;return r=null==n?this.findKeyIdx(t):function(){var r,o,s,u;for(s=this.keys,u=[],e=o=0,r=s.length;r>o;e=++o)i=s[e],n(i,t)===!0&&u.push(e);return u}.call(this).first,r>=0?this.values[r]:("function"==typeof this.defaultVal?this.defaultVal():void 0)||this.defaultVal},t.prototype.getAll=function(){var t,n,e,r,i,o;for(o=[],i=this.keys,t=r=0,e=i.length;e>r;t=++r)n=i[t],o.push([n,this.values[t]]);return o},t.prototype.hasKey=function(t){return this.findKeyIdx(t)>=0},t.prototype.has=t.prototype.hasKey,t.prototype.size=function(){return this.keys.length},t.prototype.getKeys=function(){return this.keys},t.prototype.getValues=function(){return this.values},t.prototype.getKeysForValue=function(t,n){var e,r,i;return r=null==n?function(){var n,r,o,s;for(o=this.values,s=[],e=r=0,n=o.length;n>r;e=++r)i=o[e],(this.equality(i,t)||i===t)&&s.push(e);return s}.call(this):function(){var r,o,s,u;for(s=this.values,u=[],e=o=0,r=s.length;r>o;e=++o)i=s[e],n(i,t)===!0&&u.push(e);return u}.call(this),function(){var t,n,i;for(i=[],n=0,t=r.length;t>n;n++)e=r[n],i.push(this.keys[e]);return i}.call(this)},t.prototype.empty=function(){return this.keys=[],this.values=[],this},t.prototype.remove=function(t){var n;return n=this.keys.indexOf(t),n>=0&&(this.keys.splice(n,1),this.values.splice(n,1)),this},t.prototype.each=function(t){var n,e,r,i,o;for(o=this.keys,n=i=0,r=o.length;r>i;n=++i)if(e=o[n],t(e,this.values[n],n)===!1)return this;return this},t}(),t=function(t,n){var e,r,i,o;if(t.length!==n.length)return!1;for(e=i=0,r=t.length;r>i;e=++i)if(o=t[e],o!==n[e])return!1;return!0},i=function(n,e,r){var i,o,s,u,l,a,h;for(s=function(){var t,e,r;for(r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(i.constructor);return r}(),u=h=0,a=e.length;a>h;u=++h){if(o=e[u],t(o,s))return r[u]||r[l];l=u}return null},JSUtils.jOverload=function(){var t,n,e,r,o,s,u,l,a,h,c,p,d;for(r=1<=arguments.length?f.call(arguments,0):[],e=[],o=[],s=0,a=r.length;a>s;){for(u=s;!((n=r[u])instanceof Function)&&a>u;)n instanceof Array?e.push(n):e.push(function(){var t;t=[];for(c in n)d=n[c],t.push(d);return t}()),u++;if(!(a>u))throw new Error("No function given for argument lists: "+JSON.stringify(function(){var e,i,o,u;for(o=r.slice(s),u=[],i=0,e=o.length;e>i;i++)n=o[i],u.push(function(){var e,r,i;for(i=[],r=0,e=n.length;e>r;r++)t=n[r],i.push(t.name);return i}());return u}()));for(o.push(r[u]),l=h=0,p=u-s-1;p>=0?p>h:h>p;l=p>=0?++h:--h)o.push(null);s=u+1}return function(){var t;if(null!=(t=i(arguments,e,o)))return t.apply(this,arguments);throw new Error("Arguments do not match any known argument list!")}},Math.sign=function(t){return null!=t?0>t?-1:1:0},Math.isNum=function(t){return null!=t&&isFinite(t)},Math.average=function(){var t,n,e,r,i,o;for(o=1<=arguments.length?f.call(arguments,0):[],o[0]instanceof Array&&(o=o[0]),i=0,n=0,r=0,e=o.length;e>r;r++)t=o[r],Math.isNum(t)&&(i+=t,n++);return i/n},Math.log10=function(t){return null!=t&&t>0?Math.log(t)/Math.LN10:void 0},Math.roundToSig=function(t,n){return parseFloat(t.toPrecision(n))},Math.toSig=function(t,n,e){var r,i,o,s;return null==e&&(e=""),o=Math.roundToSig(t,n),s=(""+o).replace(".","").length,r=n>s||~~o!==o?"0."+function(){var t,e,r;for(r=[],i=t=0,e=Math.abs(n-s);e>=0?e>t:t>e;i=e>=0?++t:--t)r.push("0");return r}().join(""):"0",numeral(o).format(r)},Function.prototype.clone=function(){var t=this,n=function(){return t.apply(this,arguments)};for(u in this)n[u]=this[u];return n},Object.except=function(){var t,n,e,r,i;e=arguments[0],n=2<=arguments.length?f.call(arguments,1):[],n.first instanceof Array&&(n=n.first),n=n.concat(Object.keys(e.__proto__)),r={};for(t in e)i=e[t],d.call(n,t)<0&&(r[t]=i);return r.__proto__=e.__proto__,r},Object.values=function(t){var n,e,r;e=[];for(n in t)r=t[n],e.push(r);return e},Object.values=function(t){var n,e;return function(){var r;r=[];for(n in t)e=t[n],r.push(e);return r}()},Object.swapKeys=function(){var t,n,e,r,i,o,s,u;if(o=arguments[0],r=2<=arguments.length?f.call(arguments,1):[],r.length%2===0)for(t=i=0,s=r.length;s>i;t=i+=2)n=r[t],e=r[t+1],u=o[n],o[n]=o[e],o[e]=u;return o},null==Element.prototype.remove&&(Element.prototype.remove=function(){return this.parentNode.removeChild(this)}),String.prototype.replaceMultiple=function(t,n){var e,r,i,o,s,u,l,a,h,c,p;if(null==t||t.length<2)return this;if(i=t.length,s={0:0,tuples:0,1:1,diffByOne:1,2:2,oneByDiff:2},n=s[n],null==n&&(n=0),p=this,0===n){if(1&i)return this;for(r=o=0,a=i;a>o;r=o+=2)p=p.replace(t[r],t[r+1])}if(1===n)for(c=t[i-1],r=l=0,h=i-1;h>=0?h>l:l>h;r=h>=0?++l:--l)p=p.replace(t[r],c);if(2===n){if(2!==i)return this;for(u=t.first,e=t.second,r=0;-1!==p.indexOf(u)&&i>r;)p=p.replace(u,e(r)),r++}return p},String.prototype.unCamelCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1-$2$3").toLowerCase()},String.prototype.firstToUpperCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.firstToLowerCase=function(){return this.charAt(0).toLowerCase()+this.slice(1)},String.prototype.snakeToCamelCase=function(){var t,n,e,r,i;for(i="",e=0,n=this.length;n>e;e++)t=this[e],"_"!==t&&(i+="_"!==r?t:t.toUpperCase()),r=t;return i},String.prototype.camelToSnakeCase=function(){var t,n,e,r,i;for(i="",r=null,e=0,n=this.length;n>e;e++)t=this[e],i+=t===t.toLowerCase()?t:r?"_"+t.toLowerCase():t.toLowerCase(),r=t;return i},String.prototype.lower=String.prototype.toLowerCase,String.prototype.upper=String.prototype.toUpperCase,String.prototype.isNumeric=function(){return Math.isNum(parseFloat(this))},String.prototype.endsWith=function(t){var n;return n=this.lastIndexOf(t),n>=0?n+t.length===this.length:!1},String.prototype.times=function(t){var n,e,r,i;for(null==t&&(t=1),i="",n=e=0,r=t;r>=0?r>e:e>r;n=r>=0?++e:--e)i+=this;return i},String.prototype.encodeHTMLEntities=function(){return this.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"})},Array.prototype.unique=function(){var t,n,e,r;for(r=[],e=0,n=this.length;n>e;e++)t=this[e],d.call(r,t)<0&&r.push(t);return r},Array.prototype.uniqueBy=function(t,n){var e,r,i,o,s,u,l,a;for(null==t&&(t=function(t){return t}),null==n&&(n=function(t,n){return t===n}),a=[],u=0,o=this.length;o>u;u++){for(i=this[u],r=!1,l=0,s=a.length;s>l;l++)if(e=a[l],n(t(e),t(i))){r=!0;break}r||a.push(i)}return a},Array.prototype.intersect=function(t){var n;return t=t,function(){var e,r,i;for(i=[],r=0,e=this.length;e>r;r++)n=this[r],d.call(t,n)>=0&&i.push(n);return i}.call(this).unique()},Array.prototype.intersects=function(t){return this.intersect(t).length>0},Array.prototype.groupBy=function(t,n){var e,r,i,o,s;for(e=new App.Hash(null,n),s=0,o=this.length;o>s;s++)r=this[s],i=t(r),null==e.get(i)&&e.put(i,[]),e.get(i).push(r);return e},Array.prototype.insert=function(){var t,n;return n=arguments[0],t=2<=arguments.length?f.call(arguments,1):[],this.splice.apply(this,[n,0].concat(f.call(t))),this},Array.prototype.remove=function(){var t,n;return n=1<=arguments.length?f.call(arguments,0):[],function(){var e,r,i;for(i=[],r=0,e=this.length;e>r;r++)t=this[r],d.call(n,t)<0&&i.push(t);return i}.call(this)},Array.prototype.removeAt=function(t){return this.splice(t,1),this},Array.prototype.elemMoved=function(t,n){var e,r,i,o,s,u;for(u=[],r=this[t],i=s=0,o=this.length;o>s;i=++s)e=this[i],i!==t&&(u.push(e),i===n&&u.push(r));return u},Array.prototype.flatten=function(){return Array.prototype.concat.apply([],this)},Array.prototype.clone=Array.prototype.slice,Array.prototype.cloneDeep=function(){var t,n,e,r;for(n=r=0,e=this.length;e>r;n=++r)t=this[n],t instanceof Array&&(this[n]=t.cloneDeep());return this.clone()},Array.prototype.except=function(){var t,n;return n=1<=arguments.length?f.call(arguments,0):[],n.first instanceof Array&&(n=n.first),function(){var e,r,i;for(i=[],r=0,e=this.length;e>r;r++)t=this[r],d.call(n,t)<0&&i.push(t);return i}.call(this)},Array.prototype.without=Array.prototype.except,Array.prototype.find=function(t,n){var e,r,i,o,s;for(t instanceof Function||(t=function(n){return n===t}),null==n&&(n=function(t){return t}),i=0,r=this.length;r>i;i++){if(e=this[i],t(e)===!0)return e;if((s=n(e))instanceof Array&&null!=(o=s.find(t,n)))return o}return null},Array.prototype.binIndexOf=function(t){var n,e,r,i;for(i=0,r=this.length-1;r>=i;)if(e=Math.floor((i+r)/2),n=this[e],t>n)i=e+1;else{if(!(n>t))return e;r=e-1}return-1},Array.prototype.sortProp=function(t,n){var e;return null==n&&(n="asc"),null==t&&(t=function(t){return t}),e="asc"===n?function(n,e){return n=t(n),e=t(e),e>n?-1:n>e?1:0}:function(n,e){return n=t(n),e=t(e),n>e?-1:e>n?1:0},this.sort(e)},Array.prototype.getMax=function(t){var n,e,r,i,o,s;for(i=null,o=[],null==t&&(t=function(t){return t}),r=0,e=this.length;e>r;r++)n=this[r],s=t(n),s>i||null===i?(i=s,o=[n]):s===i&&o.push(n);return o},Array.prototype.getMin=function(t){var n,e,r,i,o,s;for(i=null,o=[],null==t&&(t=function(t){return t}),r=0,e=this.length;e>r;r++)n=this[r],s=t(n),i>s||null===i?(i=s,o=[n]):s===i&&o.push(n);return o},Array.prototype.reverseCopy=function(){var t;return function(){var n,e;for(e=[],n=this.length-1;n>=0;n+=-1)t=this[n],e.push(t);return e}.call(this)},Array.prototype.sample=function(t,n){var e,r,i,o;if(null==t&&(t=1),null==n&&(n=!1),1===t)return n?[this[Math.floor(Math.random()*this.length)]]:this[Math.floor(Math.random()*this.length)];for(t>this.length&&(t=this.length),i=0,o=[],e=this.clone();i++<t;)r=e.sample(1),o.push(r),e.remove(r);return o},Array.prototype.shuffle=function(){var t,n,e,r,i;for(t=this.sample(this.length),e=i=0,r=t.length;r>i;e=++i)n=t[e],this[e]=n;return this},Array.prototype.toObject=function(t){var n,e,r,i,o,s,u;if(u={},null==t){for(e=o=0,r=this.length;r>o;e=++o)n=this[e],u[n[0]]=n[1];return u}for(e=s=0,i=this.length;i>s;e=++s)n=this[e],n=t(n),u[n[0]]=n[1];return u},Array.prototype.swap=function(t,n){var e;return e=this[t],this[t]=this[n],this[n]=e,this},Array.prototype.times=function(t){var n,e,r,i;for(i=this.clone(),n=e=1,r=t;r>=1?r>e:e>r;n=r>=1?++e:--e)i=i.merge(this);return i},Array.prototype.prepend=Array.prototype.unshift,Array.prototype.append=Array.prototype.push,e={and:{value:function(t){return this.concat([t])}},merge:{value:function(t){return Array.prototype.push.apply(this,t),this}},noNulls:{value:function(){var t,n,e,r;for(r=[],e=0,n=this.length;n>e;e++)t=this[e],null!=t&&r.push(t);return r}},average:{get:function(){return Math.average.apply(null,this)},set:function(){}},last:{get:function(){return this.length>0?"undefined"!=typeof n&&null!==n&&n>0?this.slice(-n):this[this.length-1]:void 0},set:function(t){return this[this.length-1]=t,this}},sum:{get:function(){var t,n,e,r;for(r=0,e=0,n=this.length;n>e;e++)t=this[e],Math.isNum(t)&&(r+=t);return r},set:function(){return this}}},s=["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","forty-second"],r=function(t,n){return e[t]={get:function(){return this[n]},set:function(t){return this[n]=t,this}}},o=a=0,l=s.length;l>a;o=++a)c=s[o],r(c,o);for(u in e)p=e[u],p.enumerable=!1,p.configurable=!1;Object.defineProperties(Array.prototype,e),$.fn.content=function(t){var n,e;return null!=t?("string"==typeof t&&(n=this.children().detach(),this.empty().append(t).append(n)),this):(n=this.children().detach(),e=this.text(),this.append(n),e)},$.fn.toggleAttr=function(t,n,e,r){var i,o,s;for(s=0,o=this.length;o>s;s++)i=this[s],r===!0?$(i).css(t)===n?$(i).css(t,e):$(i).css(t,n):$(i).attr(t)===n?$(i).attr(t,e):$(i).attr(t,n);return this},$.fn.dimensions=function(){return{x:parseInt(this.width(),10),y:parseInt(this.height(),10)}},$.fn.outerDimensions=function(t){return null==t&&(t=!0),{x:this.outerWidth(t),y:this.outerHeight(t)}},$.fn.showFast=function(t){return null==t&&(t="block"),this[0].style.display=t,this},$.fn.hideFast=function(){return this[0].style.display="none",this},$.fn.inDom=function(){return $.contains(document.documentElement,this[0])},h=$.fn.wrapAll,$.fn.wrapAll=function(t){return this.inDom()?h.call(this,t):(t instanceof $||(t=$(t)),t.append(this),this)},$.fn.appendLog=function(){var t,n,e;return t=2<=arguments.length?f.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],this.append.apply(this,t),e=e.push.apply(e,t),this},$.Color.fn.distanceTo=function(t,n){return null==n&&(n=function(t,n){return Math.abs(t.red()-n.red())+Math.abs(t.green()-n.green())+Math.abs(t.blue()-n.blue())}),n(this,t)},$.Color.fn.isSimilarTo=function(t){return this.distanceTo(t)/255<.3819660112501453},$.Color.fn.toRgbaString=function(){return"rgba("+this._rgba.join(",")+")"},d3.transition.prototype.done=function(t){var n;return n=function(n){var e;return 0===n.size()&&t(),e=0,n.each(function(){return++e,!0}).each("end",function(){return--e||t.apply(this,arguments),!0}),this},this.call(n,t)},JSUtils.Tree=function(){function t(t){var n,e,r,i;if(r=this,this.children=[],this.parent=null,this.descendants=[],this.orderMode="postorder",null==t)this.data={};else{this.data=t.data||t,n=Object.keys(this.constructor.prototype).concat(["children","parent","descendants","data","orderMode","getClass","getClassName","constructor"]);for(e in t)i=t[e],d.call(n,e)<0&&(i instanceof Function?!function(n,e){return r[n]=function(){return e.call.apply(e,[t].concat(f.call(arguments)))}}(e,i):!function(t,n){return Object.defineProperty(r,t,{get:function(){return r.data[t]},set:function(n){return r.data[t]=n,r}})}(e,i))}}var n;return n=t,t["new"]=function(t,e){if(isFunction(t)&&t instanceof this)return new n(t);if(null!=t.children)return n["new"].byChildRef(t);if(null!=t.parent)return n["new"].byParentRef(t);if(null!=e){if(null!=e.getChildren)return n["new"].byChildRef(t,e);if(null!=e.getParent)return n["new"].byParentRef(t,e)}return null},t["new"].byChildRef=function(t,e){var r,i,o,s,u,l,a,h;for(s={getChildren:function(t){return t.children},instantiate:function(t){return new n(t)},afterInstantiate:function(t,n){return!1},adjustLevels:!0},e=$.extend(s,e),r=e.adjustLevels,e.adjustLevels=!1,h=e.instantiate(t),e.afterInstantiate(t,h),a=e.getChildren(t)||[],l=0,u=a.length;u>l;l++)i=a[l],o=n["new"].byChildRef(i,e),h.addChild(o,null,!1);return r&&h.adjustLevels(0),h},t["new"].byParentRef=function(t,e){var r;return r=new n},t.fromRecursive=t["new"],Object.defineProperties(t.prototype,{depth:{get:function(){return this.getDepth()},set:function(){return this}},size:{get:function(){return this.getSize()},set:function(){return this}},level:{get:function(){return this.getLevel()},set:function(){return this}},root:{get:function(){return this.getRoot()},set:function(){return this}}}),t.prototype._cacheDescendants=function(){var t,n,e,r,i;for(i=[],r=this.children,e=0,n=r.length;n>e;e++)t=r[e],t._cacheDescendants(),i=i.concat(t.descendants);return this.descendants=this.children.concat(i),this},t.prototype.equals=function(t,n){var e,r,i,s,u,l,a,h,c;if(this.children.length>0){if(this.children.length!==t.children.length||this.descendants.length!==t.descendants.length)return!1;for(a=t.children.clone(),c=this.children,u=0,e=c.length;e>u;u++){for(s=c[u],i=!1,o=h=0,r=a.length;r>h;o=++h)if(l=a[o],s.equals(l)){i=!0;break}if(!i)return!1;a.splice(o,1)}return!0}return n instanceof Function?n(this,t):!0},t.prototype.hasNode=function(t){return this===t||d.call(this.descendants,t)>=0},t.prototype.findNode=function(t){var n;return(null!=(n=this.findNodes(t))?n.first:void 0)||null},t.prototype.findDescendant=function(){return this.findNode.apply(this,arguments)},t.prototype.findNodes=function(t){var n,e,r,i,o;if(o=[],t instanceof Function)for(i=this.descendants,r=0,n=i.length;n>r;r++)e=i[r],t(e)&&o.push(e);return o},t.prototype.findDescendants=function(){return this.findNodes.apply(this,arguments)},t.prototype.getDepth=function(){var t;return this.children.length>0?(t=this.descendants.getMax(function(t){return t.level}),t.first.level-this.level):0},t.prototype.getSize=function(){return this.descendants.length+1},t.prototype.getLevel=function(){return this._level},t.prototype.getRoot=function(){var t;if(null==(t=this.parent))return this;for(;null!=t.parent;)t=t.parent;return t},t.prototype.getLeaves=function(){var t,n,e,r,i;for(n=[],i=this.children,r=0,e=i.length;e>r;r++)t=i[r],t.children.length>0?n.merge(t.getLeaves()):n.push(t);return n},t.prototype.isLeaf=function(){return 0===this.children.length},t.prototype.serialize=function(t,n){var e,r,i,o,s,u,l;for(null==n&&(n=[]),l=[],u=this.children,s=0,o=u.length;o>s;s++)i=u[s],d.call(n,i)<0&&(n.push(i),l.push(i.serialize(t,n)));return null==t?{children:l,data:("function"==typeof(e=this.data).serialize?e.serialize():void 0)||JSON.parse(JSON.stringify(this.data))}:t(this,l,("function"==typeof(r=this.data).serialize?r.serialize():void 0)||JSON.parse(JSON.stringify(this.data)))},t.prototype.deserialize=function(t){var n,e,r;for(r=this.constructor["new"](t),this.children=r.children,p=e=0,n=t.length;n>e;p=++e)u=t[p],"children"!==u&&(this[u]=p);return this},t.prototype.toObject=function(){return this.serialize()},t.prototype.pathToRoot=function(){var t,n;for(n=[this],t=this.parent;null!=t;)n.push(t),t=t.parent;return n.reverse(),n},t.prototype.getSiblings=function(){var t;return(null!=(t=this.parent)?t.children.except(this):void 0)||[]},t.prototype.getLevelSiblings=function(){var t,n,e;return n=this,e=null!=(t=this.getRoot())?t.findNodes(function(t){return t.level===n.level&&t!==n}):void 0,e||[]},t.prototype.getParent=function(){return this.parent},t.prototype.getChildren=function(){return this.children},t.prototype.addChild=function(t,e,r){return null==r&&(r=!0),t.instanceOf(JSUtils.Tree)||(t=new n(t)),null!=t.parent&&t.parent!==this?(t.moveTo(this,e),this):(null==e?this.children.push(t):this.children.insert(e,t),t.parent=this,r&&t.adjustLevels(this.level),this)},t.prototype.appendChild=function(){return this.addChild.apply(this,arguments)},t.prototype.addChildren=function(t,n,e){var r,i;for(null==e&&(e=!0),i=t.length-1;i>=0;i+=-1)r=t[i],null!=r&&this.addChild(r,n,!1);return e&&this.adjustLevels(this.level),this},t.prototype.appendChildren=function(){return this.addChildren.apply(this,arguments)},t.prototype.setChildren=function(t,n,e){var r,i,o;for(null==n&&(n=!1),null==e&&(e=!0),this.children=[],n&&(t=function(){var n,e,r;for(r=[],e=0,n=t.length;n>e;e++)i=t[e],null!=i&&r.push(i.clone());return r}()),o=0,r=t.length;r>o;o++)i=t[o],this.addChild(i,!1);return e&&this.adjustLevels(this.level),this},t.prototype.moveTo=function(t,n,e){return null==e&&(e=!0),this.remove(!1),t.addChild(this,n,e),this},t.prototype.remove=function(t){return null==t&&(t=!0),null!=this.parent&&(this.parent.children=this.parent.children.except(this),this.parent.descendants=this.parent.descendants.except(this.descendants.and(this)),this.parent=null,t&&this.adjustLevels()),this},t.prototype.removeChild=function(t){return d.call(this.children,t)>=0&&t.remove(),this},t.prototype.removeChildAt=function(t){return removeChild(this.children[t])},t.prototype.appendTo=function(t){return t.addChild(this)},t.prototype.adjustLevels=function(t){return null==t&&(t=0),this._cacheDescendants().each(function(n,e,r){return n._level=t+e,!0}),this},t.prototype.traverse=function(t,n,e){return null==n&&(n=this.orderMode||"postorder"),null==e&&(e=null),this[n](t,null,e)},t.prototype.each=function(){return this.traverse.apply(this,arguments)},t.prototype.postorder=function(t,n,e){var r,i,o,s;for(null==n&&(n=0),null==e&&(e={idx:0,ctx:this}),s=this.children,o=0,i=s.length;i>o;o++)r=s[o],r.postorder(t,n+1,e),e.idx++;return t.call(e.ctx,this,n,e.idx)===!1?this:this},t.prototype.preorder=function(t,n,e){var r,i,o,s;if(null==n&&(n=0),null==e&&(e={idx:0,ctx:this}),t.call(e.ctx,this,n,e.idx)===!1)return this;for(s=this.children,o=0,i=s.length;i>o;o++)r=s[o],r.preorder(t,n+1,e),e.idx++;return this},t.prototype.inorder=function(t,n,e,r){var i,o,s,u,l,a;for(null==e&&(e=Math.floor(this.children.length/2)),null==r&&(r={idx:0,ctx:this}),i=o=0,u=e;u>=0?u>o:o>u;i=u>=0?++o:--o)this.children[i].inorder(t,n+1,e,r),r.idx++;if(t.call(r.ctx,this,n,r.idx)===!1)return this;for(i=s=l=e,a=this.children.lenth;a>=l?a>s:s>a;i=a>=l?++s:--s)this.children[i].inorder(t,n+1,e,r),r.idx++;return this},t.prototype.levelorder=function(t,n,e){var r,i,o,s,u;for(null==n&&(n=0),null==e&&(e={idx:0,ctx:this,levelIdx:0}),o=[this],u=this.level,s=0;o.length>0;){if(i=o.shift(),r=i.level-u,r>s&&(e.levelIdx=0),t.call(e.ctx,i,r,e)===!1)return this;s=r,e.idx++,e.levelIdx++,o=o.concat(i.children)}return this},t}(),JSUtils.Leaf=function(t){function n(t){n.__super__.constructor.call(this,t),delete this.children,Object.defineProperty(this,"children",{get:function(){return[]},set:function(){throw new Error("JSUtils.Leaf::children=: Cannot set children of a leaf!")}})}var e;return y(n,t),e=n,n["new"]=function(t){return new this(t)},n.prototype._cacheDescendants=function(){return this},n.prototype.findNodes=function(t){return null},n.prototype.getDepth=function(){return 0},n.prototype.getSize=function(){return 0},n.prototype.getLevel=function(){return this._level},n.prototype.getLeaves=function(){return[]},n.prototype.isLeaf=function(){return!0},n.prototype.serialize=function(t){var n,e;return null==t?{children:[],data:("function"==typeof(n=this.data).serialize?n.serialize():void 0)||JSON.parse(JSON.stringify(this.data))}:t(this,[],("function"==typeof(e=this.data).serialize?e.serialize():void 0)||JSON.parse(JSON.stringify(this.data)))},n.prototype.deserialize=function(t){return this.data=t,this},n.prototype.getChildren=function(){return[]},n.prototype.addChild=function(){throw new Error("JSUtils.Leaf::addChild: Cannot add a child to a leaf!")},n.prototype.addChildren=function(){throw new Error("JSUtils.Leaf::addChildren: Cannot add children to a leaf!")},n.prototype.setChildren=function(){throw new Error("JSUtils.Leaf::setChildren: Cannot set children of a leaf!")},n.prototype.removeChild=function(){throw new Error("JSUtils.Leaf::removeChild: Cannot remove children of a leaf!")},n.prototype.removeChildAt=function(t){throw new Error("JSUtils.Leaf::removeChildAt: Cannot remove children of a leaf!")},n.prototype.adjustLevels=function(){return this},n}(JSUtils.Tree)}).call(this);